<ng-template [ngTemplateOutlet]="templateTop" [ngTemplateOutletContext]="this"></ng-template>
<p *ngIf="!hasConf">
    Please <button mat-raised-button color="primary" class="btn btn-link" type="button" (click)="goConf()">Click here</button> to setup configuration first.
</p>
<mat-card class="form-card">
    <div class="mat-content">
        <form (ngSubmit)="onSubmit($event)" [formGroup]="formGroup" class="form-wrap" #entityForm="ngForm">
           <!-- <ng-container *ngFor="let field of fieldConfig; let i = index">
                <div [ngClass]="field.class == 'inline' ? 'form-inline' : 'form-line'" id="{{i}}">
                    <div id="dynamicField_{{field.name}}" dynamicField [config]="field" [group]="formGroup" [fieldShow]="isShow(field.name) ? 'show' :'hide'">
                    </div>
                </div>
                </ng-container>-->
                <div class="fieldset-container fieldset-display-default" *ngIf="fieldSets">
            <ng-container *ngFor="let fieldSet of fieldSets; let i = index">
              <div [ngClass]="fieldSet.class" class="fieldset divider-{{fieldSet.divider}}"
                  fxLayout="row wrap" fxLayoutAlign="start start" fxFlex="100%" fxFlex.gt-xs="calc({{fieldSets[i].width}} - 16px)">
                <mat-divider *ngIf="fieldSets[i].divider && i > 0"></mat-divider>
                <!--<ng-template>-->
                  <h4 *ngIf="fieldSet.label" class="fieldset-label">{{fieldSet.name}}</h4>
                  <div *ngFor="let field of fieldSet.config; let ii = index" fxFlex="100%" fxFlex.gt-xs="calc({{field.width}} - 16px)"
                    [ngClass]="field.class == 'inline' ? 'form-inline' : 'form-line'" id="{{fieldSet.name}}-{{ii}}">
                    <div id="form_field_{{field.name}}" dynamicField [config]="field" [group]="formGroup" [fieldShow]="isShow(field.name) ? 'show' :'hide'"></div>
                  </div>
                <!--</ng-template>-->
              </div>
            </ng-container>
            <mat-card-actions class="buttons">
                <button id="save_button" class="btn btn-block btn-warning" type="submit" mat-button color="primary" [disabled]="!entityForm.form.valid" >{{saveSubmitText | translate}}</button>
                <button id="goback_button" *ngIf="conf.route_success" class="btn  btn-block btn-raised btn-lg btn-primary" type="button" (click)="goBack()" mat-button color="accent">{{"Cancel" | translate}}</button>
                <!-- </div> -->
                <!-- <div class="btn-group btn-group-justified btn-group-raised"> -->
                <span *ngFor="let custBtn of conf.custActions">
                  <button id="cust_button_{{custBtn.name}}" mat-button *ngIf="!conf.isCustActionVisible || conf.isCustActionVisible(custBtn.id)" type="button" (click)="custBtn['function']()">{{custBtn.name | translate}}</button>
                </span>
                <button mat-button *ngIf="conf.route_delete" class="btn btn-block btn-danger" type="button" (click)="gotoDelete()">{{"Delete" | translate}}</button>
                <!-- </div> -->
            </mat-card-actions>
          </div>
            <!-- <div class="btn-group btn-group-justified btn-group-raised"> -->
        </form>
        <p *ngIf="success" type="success" id="successfully_updated">{{"Successfully updated." | translate}}</p>
        <p *ngIf="error" type="danger" id="error_message"><span [innerHTML]="error"></span></p>
    </div>
</mat-card>
