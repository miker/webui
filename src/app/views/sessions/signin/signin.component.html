<div class="page-wrap height-100 mat-bg-primary">
  <div class="session-form-hold">
    <mat-progress-bar mode="determinate" class="session-progress"></mat-progress-bar>
    <mat-card>
      <mat-card-content>
        <div *ngIf="connected();else notconnected">
          <div class="text-center pb-1" *ngIf="logo_ready">
            <img *ngIf="is_freenas; else isTruenas" src="assets/images/logo-full.svg" alt="FreeNAS logo">
            <ng-template #isTruenas>
              <img src="assets/images/truenas-logo.svg" alt="TrueNAS logo">
            </ng-template>
          </div>
          <form #signinForm="ngForm" (ngSubmit)="signin()">
            <div class="">
              <mat-input-container class="full-width">
                <input matInput name="username" required [(ngModel)]="signinData.username" #username="ngModel" placeholder="{{'Username' | translate}}" value="">
                <mat-error *ngIf="username.errors && (username.dirty || username.touched) && (username.errors.required)">
                  <span *ngIf="!failed">{{"Please enter your username" | translate}}</span>
                  <span *ngIf="failed">{{"Please enter your username again" | translate}}</span>
                </mat-error>
              </mat-input-container>
            </div>
            <div class="">
              <mat-input-container class="full-width">
                <input type="password" name="password" required matInput [(ngModel)]="signinData.password" #password="ngModel" placeholder="{{'Password' | translate}}" value="">
                <mat-error *ngIf="password.errors && (password.dirty || password.touched) && (password.errors.required)">
                    <span *ngIf="!failed">{{"Please enter your password" | translate}}</span>
                    <span *ngIf="failed">{{"Please enter your password again" | translate}}</span>
                </mat-error>
              </mat-input-container>
            </div>
            <button name="signin_button" mat-raised-button class="mat-accent full-width mb-1" [disabled]="username.errors || password.errors">{{"Sign in" | translate}}</button>
            <button name="authenticator_signin_button" type="button" mat-raised-button class="mat-accent full-width mb-1" [disabled]="username.errors">{{"Sign in with authenticator" | translate}}</button>
          </form>
        </div>
        <ng-template #notconnected>
          {{"System is not yet available, please wait" | translate}}
        </ng-template>
        <div>
          <a mat-button color="primary" href="/legacy/">{{"Back to the Old UI" | translate}}</a>
        </div>
        <div>
          <span fxFlex class="copyright-txt">FreeNAS® © 2018 - <a href="http://www.ixsystems.com" target="_blank" title="iXsystems, Inc."> iXsystems, Inc</a>.</span>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
